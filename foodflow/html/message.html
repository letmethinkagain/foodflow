<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- 引入外部 CSS 样式文件，这里假设 CSS 文件名为 message.css，和当前 HTML 文件同级目录 -->
  <title>消息 - FOODFLOW</title>
  <link rel="shortcut icon" href="../../favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="../css/hangf.css">
  <link rel="stylesheet" href="../css/message.css"> 
  <link
      href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"
      rel="stylesheet"
    />
</head>

<body>
  <!-- 顶部固定导航 -->
  <header class="header fixed-top">
    <div class="header-inner">
      <div class="logo">
        <img src="../img/android-chrome-192x192.png" alt="LOGO" />
      </div>
      <div class="search-box">
        <input type="text" placeholder="搜索" />
        <span class="search-icon"><i class="fa fa-search"></i></span>
      </div>
      <div class="cart-login">
        <a href="mine.html" class="cart-icon" id="messageCartIcon"><i class="fa fa-shopping-cart"></i></a>
      </div>
    </div>
  </header>
  <!-- 功能按钮区域 -->
  <section class="func-btns">
    <button class="func-item" data-type="favorites">
      <a href="#">
        <i class="fa fa-star"></i>
        <span>收藏和赞</span>
      </a>      
    </button>
    <button class="func-item" data-type="new-follows">
      <a href="follow.html">
        <i class="fa fa-user-plus"></i>
        <span>关注</span>
      </a>
      
    </button>
    <button class="func-item" data-type="comments">
      <a href="#">
        <i class="fa fa-comments"></i>
        <span>评论</span>
      </a>      
    </button>
    <button class="func-item" data-type="orders">
      <a href="order.html">
        <i class="fa fa-shopping-bag"></i>
        <span>订单</span>
      </a>
      
    </button>
    <!-- <button class="btn">
      <img src="star-icon.png" alt="@"> 实际应替换为真实图标路径，这里只是示例
      <span>收藏</span>
    </button>
    <button class="btn">
      <img src="user-add-icon.png" alt="@">
      <span>新增关注</span>
    </button>
    <button class="btn">
      <img src="bubble-icon.png" alt="@">
      <span>评论</span>
    </button>
    <button class="btn">
      <img src="order-icon.png" alt="@">
      <span>订单</span>
    </button> -->
  </section>
  <!-- 消息列表区域 -->
  <section class="message-list">
    <div class="message-item">
      <div class="item-avatar">
        <img src="../img/carousel1.png" alt="头像">
      </div>
      <div class="item-info">
        <span class="item-name">异国料理迷</span>
        <p class="item-msg">看到你发的早餐合集，那个三明治的煎蛋技巧好棒，能不能再讲讲细节呀？</p>
      </div>
    </div>
    <div class="message-item">
      <div class="item-avatar">
        <img src="../img/carousel2.png" alt="头像">
      </div>
      <div class="item-info">
        <span class="item-name">厨房小白成长记</span>
        <p class="item-msg">我照着你的方法改良了一下酸辣粉，加了点自己泡的酸豆角，味道绝了，你也可以试试！</p>
      </div>
    </div>
    <div class="message-item">
      <div class="item-avatar">
        <img src="../img/carousel3.png" alt="头像">
      </div>
      <div class="item-info">
        <span class="item-name">挑食的吃货</span>
        <p class="item-msg">你推荐的那家宝藏面馆我去打卡了，确实如你所说，汤底特别鲜，下次一起去呀？</p>
      </div>
    </div>
    <div class="message-item">
      <div class="item-avatar">
        <img src="../img/carousel4.png" alt="头像">
      </div>
      <div class="item-info">
        <span class="item-name">美食分享家</span>
        <p class="item-msg">请教一下，做面包的时候面团总是发不起来，是温度不够还是酵母的问题呀？</p>
      </div>
    </div>
    <div class="message-item">
      <div class="item-avatar">
        <img src="../img/carousel5.png" alt="头像">
      </div>
      <div class="item-info">
        <span class="item-name">早餐不重样</span>
        <p class="item-msg">你拍的美食照片也太好看了吧！用的什么相机呀？求摄影技巧分享～</p>
      </div>
    </div>
    <div class="message-item">
      <div class="item-avatar">
        <img src="../img/carousel6.png" alt="头像">
      </div>
      <div class="item-info">
        <span class="item-name">辣味爱好者</span>
        <p class="item-msg">刚做了你的独家配方曲奇，口感酥脆到掉渣，已经被朋友追着要链接了哈哈</p>
      </div>
    </div>
    <div class="message-item">
      <div class="item-avatar">
        <img src="../img/method1.png" alt="头像">
      </div>
      <div class="item-info">
        <span class="item-name">烘焙小能手</span>
        <p class="item-msg">看到你发的减脂餐，想问下那个鸡胸肉是怎么做到不柴的？我每次做都很干</p>
      </div>
    </div>
    <div class="message-item">
      <div class="item-avatar">
        <img src="../img/method2.png" alt="头像">
      </div>
      <div class="item-info">
        <span class="item-name">家常菜达人</span>
        <p class="item-msg">你知道哪里能买到新鲜的迷迭香吗？做牛排的时候想用，超市总是断货</p>
      </div>
    </div>
    <div class="message-item">
      <div class="item-avatar">
        <img src="../img/method3.png" alt="头像">
      </div>
      <div class="item-info">
        <span class="item-name">甜品控阿泽</span>
        <p class="item-msg">你做的寿喜烧看起来好有食欲，请问汤底是用什么调料调的呀？</p>
      </div>
    </div>
    <div class="message-item">
      <div class="item-avatar">
        <img src="../img/method4.png" alt="头像">
      </div>
      <div class="item-info">
        <span class="item-name">美食探店员</span>
        <p class="item-msg">我把你的酸菜鱼菜谱整理成了图文笔记，已经标注出处啦，需要的话可以发给你看看</p>
      </div>
    </div>
    <div class="message-item">
      <div class="item-avatar">
        <img src="../img/carousel1.png" alt="头像">
      </div>
      <div class="item-info">
        <span class="item-name">厨神小方</span>
        <p class="item-msg">你分享的红烧肉菜谱太实用啦！按照步骤做了一次，家人都说超好吃，谢谢分享～</p>
      </div>
    </div>
    <div class="message-item">
      <div class="item-avatar">
        <img src="../img/carousel2.png" alt="头像">
      </div>
      <div class="item-info">
        <span class="item-name">味食记</span>
        <p class="item-msg">想问下你做的提拉米苏里的马斯卡彭奶酪是哪个牌子的呀？一直没找到合适的</p>
      </div>
    </div>
  </section>

  <!-- 底部固定导航 -->
  <footer class="footer fixed-bottom">
    <ul class="footer-nav">
      <li>
        <a href="index.html"
          ><i class="fa fa-home"></i> 首页</a
        >
      </li>
      <li>
        <a href="community.html"><i class="fa fa-comments"></i> 社区</a>
      </li>
      <li>
        <a href="message.html" class="active"><i class="fa fa-envelope"></i> 消息</a>
      </li>
      <li>
        <a href="mine.html"><i class="fa fa-user"></i> 我的</a>
      </li>
    </ul>
  </footer>

  <script>
    // 消息页面购物车图标点击事件
    document.addEventListener('DOMContentLoaded', function() {
      const cartIcon = document.getElementById('messageCartIcon');
      if (cartIcon) {
        cartIcon.addEventListener('click', function(e) {
          // 阻止默认跳转，使用带提示的跳转
          e.preventDefault();
          
          // 标记从购物车图标跳转
          localStorage.setItem('fromCart', 'icon');
          
          // 带提示跳转到我的页面
          jumpWithTip('mine.html', '前往我的购物车', 1000);
        });
      }
    });

    // 引入通用工具函数（如果common.js已全局引入可省略）
    // 这里仅保留跳转相关函数，确保功能可用
    function jumpTo(url) {
      window.location.href = url;
    }

    function jumpWithTip(url, msg, delay = 1500) {
      showToast(msg);
      setTimeout(() => {
        jumpTo(url);
      }, delay);
    }

    function showToast(msg, isError = false) {
      const oldToast = document.querySelector('.custom-toast');
      if (oldToast) oldToast.remove();

      const toast = document.createElement('div');
      toast.className = `custom-toast fixed bottom-8 left-1/2 transform -translate-x-1/2 px-4 py-3 rounded-lg text-white z-50 transition-all duration-300 ${
        isError ? 'bg-red-500' : 'bg-green-500'
      }`;
      toast.textContent = msg;
      document.body.appendChild(toast);

      setTimeout(() => {
        toast.classList.add('opacity-0');
        setTimeout(() => toast.remove(), 300);
      }, 3000);
    }
  </script>
</body>

</html>
